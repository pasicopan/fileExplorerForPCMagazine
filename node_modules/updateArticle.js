var fs = require('fs');
var path = require('path');

function loadDB(a_URL,a_callback) {
    fs.readFile(a_URL+'db.json', 'utf8',function(err, data) {
        if (err) {
            console.log("FATAL An error occurred trying to read in the file: " + err);
            process.exit(-2);
        }
        if (data) {
            // console.log('JSON.parse is:',JSON.parse)
                data = data.replace(/.*\{/,'{');
                // dataarr = data.split('');
                // console.log('dataarr is:',dataarr)
            try{
                console.log(JSON.parse(data))
                a_callback(JSON.parse(data));
            }catch(e){
                console.log(e)
            }
            // a_callback(JSON.parse(data));
        } else {
            console.log("No data in db.json");
            process.exit(-1);
        }
    });
}

function UpdateArticle(){
    var that = this;
    that.init = function(options) {
        loadDB(options.path,function(a_json) {
            console.log(a_json.cmsip, a_json.cmsport);

        });
    }
}



exports.UpdateArticle = UpdateArticle;